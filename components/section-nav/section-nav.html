<!-- Section Navigation Bar -->
<nav id="section-nav" class="section-nav-bar">
    <div class="container-fluid px-4">
        <div class="section-nav-wrapper">
            <ul class="section-nav-list">
                <li class="section-nav-item">
                    <a href="#hero-section" class="section-nav-link active" data-section="hero-section">
                        <i class="bi bi-house-door"></i>
                        <span>Home</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#services" class="section-nav-link" data-section="services">
                        <i class="bi bi-gear"></i>
                        <span>Services</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#products" class="section-nav-link" data-section="products">
                        <i class="bi bi-box"></i>
                        <span>Products</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#cyber-security" class="section-nav-link" data-section="cyber-security">
                        <i class="bi bi-shield-check"></i>
                        <span>Security</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#who-we-are" class="section-nav-link" data-section="who-we-are">
                        <i class="bi bi-people"></i>
                        <span>About Us</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#testimonials" class="section-nav-link" data-section="testimonials">
                        <i class="bi bi-chat-quote"></i>
                        <span>Testimonials</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#careers" class="section-nav-link" data-section="careers">
                        <i class="bi bi-briefcase"></i>
                        <span>Careers</span>
                    </a>
                </li>
                <li class="section-nav-item">
                    <a href="#contact" class="section-nav-link" data-section="contact">
                        <i class="bi bi-envelope"></i>
                        <span>Contact</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<style>
/* Section Navigation Bar */
.section-nav-bar {
    position: sticky;
    top: 6rem;
    z-index: 999;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(220, 20, 60, 0.1);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
}

[data-bs-theme="dark"] .section-nav-bar {
    background: rgba(26, 26, 26, 0.95);
    border-bottom: 1px solid rgba(220, 20, 60, 0.2);
}

/* When scrolled and attached to main nav */
.section-nav-bar.attached {
    top: 6rem;
    box-shadow: none;
    border-top: 1px solid rgba(220, 20, 60, 0.1);
}

/* Section Nav Wrapper */
.section-nav-wrapper {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.section-nav-wrapper::-webkit-scrollbar {
    display: none;
}

/* Section Nav List */
.section-nav-list {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 0.5rem;
    min-width: max-content;
}

/* Section Nav Item */
.section-nav-item {
    flex-shrink: 0;
}

/* Section Nav Link */
.section-nav-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 1.5rem;
    color: var(--text-primary);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
    white-space: nowrap;
    border-bottom: 2px solid transparent;
}

.section-nav-link i {
    font-size: 1.1rem;
    transition: all 0.3s ease;
}

/* Hover Effect */
.section-nav-link:hover {
    color: var(--accent-primary);
    border-bottom-color: var(--accent-primary);
}

.section-nav-link:hover i {
    transform: scale(1.1);
}

/* Active State */
.section-nav-link.active {
    color: var(--accent-primary);
    border-bottom-color: var(--accent-primary);
    background: rgba(220, 20, 60, 0.05);
}

[data-bs-theme="dark"] .section-nav-link.active {
    background: rgba(220, 20, 60, 0.1);
}

/* Responsive */
@media (max-width: 768px) {
    .section-nav-bar {
        top: 5rem;
    }
    
    .section-nav-bar.attached {
        top: 5rem;
    }
    
    .section-nav-link {
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
    }
    
    .section-nav-link span {
        display: none;
    }
    
    .section-nav-link i {
        font-size: 1.3rem;
    }
}

/* Smooth scroll behavior */
html {
    scroll-behavior: smooth;
}

/* Offset for sticky headers */
section {
    scroll-margin-top: 8rem;
}

@media (max-width: 768px) {
    section {
        scroll-margin-top: 6rem;
    }
}
</style>

<script>
// Section Navigation Script
document.addEventListener('DOMContentLoaded', function() {
    const sectionNav = document.getElementById('section-nav');
    const sectionLinks = document.querySelectorAll('.section-nav-link');
    const mainNav = document.querySelector('.navbar');
    
    if (!sectionNav || !sectionLinks.length) return;
    
    // Smooth scroll to section
    sectionLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href').substring(1);
            const targetSection = document.getElementById(targetId);
            
            if (targetSection) {
                // Remove active class from all links
                sectionLinks.forEach(l => l.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Scroll to section
                const offset = 140; // Account for both navbars
                const targetPosition = targetSection.offsetTop - offset;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
    
    // Update active link on scroll
    const sections = Array.from(sectionLinks).map(link => {
        const id = link.getAttribute('href').substring(1);
        return document.getElementById(id);
    }).filter(section => section !== null);
    
    function updateActiveLink() {
        const scrollPosition = window.scrollY + 200;
        
        let currentSection = null;
        
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;
            
            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                currentSection = section;
            }
        });
        
        if (currentSection) {
            const currentId = currentSection.getAttribute('id');
            
            sectionLinks.forEach(link => {
                const linkSection = link.getAttribute('data-section');
                
                if (linkSection === currentId) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }
    }
    
    // Throttle scroll event
    let scrollTimeout;
    window.addEventListener('scroll', function() {
        if (scrollTimeout) {
            clearTimeout(scrollTimeout);
        }
        
        scrollTimeout = setTimeout(updateActiveLink, 50);
    });
    
    // Initial update
    updateActiveLink();
    
    // Check if section nav should be attached to main nav
    function checkAttachment() {
        if (!mainNav) return;
        
        const mainNavBottom = mainNav.offsetTop + mainNav.offsetHeight;
        const sectionNavTop = sectionNav.offsetTop;
        
        if (window.scrollY > 100) {
            sectionNav.classList.add('attached');
        } else {
            sectionNav.classList.remove('attached');
        }
    }
    
    window.addEventListener('scroll', checkAttachment);
    checkAttachment();
    
    console.log('âœ… Section Navigation initialized');
});
</script>
